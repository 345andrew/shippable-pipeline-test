language: node_js

node_js:
  - "6.9.1"

env:
  global:
    - secure: Xlbk72GRcL+Om63VRg9IFcQbNnA7Lh7Feq1RAev5XSvam8mO7b3DvQD5rAEToXL//w2WGmk6+/bV1PJqY3G80nqDM8cB0ZTvkTFFgm29scgug7ocXUukwDtEjvDsd2YN4uSxPQ4voPVPV+vvA0QmorAB2E4T2HQUpml+QRAVowkHTbXklkOb3vvzw0IUXV0oaWf7D/PVjdjNSApltsYO3HW+EGtO/Wc7KGaAZwYLHnuehijaDvNho1f/tkPxeIVJlus+/j4YEmTze/H2pKS2mCpcO58hAg1OJjxF0jZ7QgHd5t3KwYuPcI9UVJaHK5lmbyGint7hmUJ7EofII2s/TA==
    - secure: F2VbEYcO0QoYhHY9XQtz+LNVay+pN/1fcHUi7PqQb0yv4TKcyrlTy+Qumrnp2juw5TCOspCkjH45TNObZltI7RlMvwxxluPB7xxwCQquVC67PF1xHoqv6X1oo6iiV7ZGdhSxgswig6j5t40Mm+sfTqCeMXhvcpr7t+lFzjNSrsGgbNx928JT8gVNL9JuwJzvtEp5KNZMI9h+X3kVk7nLl7T5CDlfosXbTh34b+2WC2kDpBeZEe46d1/4G4iZl7cXUsbV7aHEVJXyQeeaI7krmFEFVH4LP85RF6/uTX2NXyhu6H0DDHeZnNcK1ur39hLFcuIV8kln0Dx4LbvvR4B06A==

branches:
  only:
    - master

build:
  cache: true
  cache_dir_list:
    - $SHIPPABLE_BUILD_DIR/node_modules
  pre_ci:
    - sudo pip install awscli
  ci:
    - npm install --unsafe-perm
    - npm run build

  post_ci:
# Push the output artefacts to S3.
    - aws s3 sync ./out s3://cloco-build-output/shippable-pipeline
