language: node_js

node_js:
  - "6.9.1"

env:
  global:
    - secure: F2VbEYcO0QoYhHY9XQtz+LNVay+pN/1fcHUi7PqQb0yv4TKcyrlTy+Qumrnp2juw5TCOspCkjH45TNObZltI7RlMvwxxluPB7xxwCQquVC67PF1xHoqv6X1oo6iiV7ZGdhSxgswig6j5t40Mm+sfTqCeMXhvcpr7t+lFzjNSrsGgbNx928JT8gVNL9JuwJzvtEp5KNZMI9h+X3kVk7nLl7T5CDlfosXbTh34b+2WC2kDpBeZEe46d1/4G4iZl7cXUsbV7aHEVJXyQeeaI7krmFEFVH4LP85RF6/uTX2NXyhu6H0DDHeZnNcK1ur39hLFcuIV8kln0Dx4LbvvR4B06A==
    - secure: qKRFVadjhdAEC51JUWBwP6UDaNlPn6nvloReKLlhG5UzgXMKhC4QjRKak8YTliLmZTBc0VTMkOvyr8HVUU62N9Z8UFF2R11AYUajYfKVK0TURmERdvRNvfIriOkB9DIaasqLLG9JgOuOD3/81oVzZmwySYiqlsuFm4qW9un18TEV/kzwTb+oE915oVqqkxkk1tS3Cfx/lVLIlvZH7Kiy36uX97QaYZ5omCC1VE6APBxPzEmLhcfi1TFhZy3cYbJMte49c8ZzeqA3SOhUxv1dH8wwAWtxuEGOVOmnS3NW6cTSGvF3g3FKB0suSRNyg7pUTt9HP1nLw3xid254OfdGkQ==

branches:
  only:
    - master

build:
  cache: true
  cache_dir_list:
    - $SHIPPABLE_BUILD_DIR/node_modules
  pre_ci:
    - sudo pip install awscli
  ci:
    - npm install --unsafe-perm
    - npm run build

  post_ci:
# Push the output artefacts to S3.
    - aws s3 sync ./out s3://cloco-build-output/shippable-pipeline
